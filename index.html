<!DOCTYPE html><!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Global Inflation Trends</title>

    <!-- Vega & Vega-Lite -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Merriweather:wght@700&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --accent-color: #1565c0;
        --bg-gradient: linear-gradient(120deg, #f8fafc, #eef2f7);
        --header-gradient: linear-gradient(90deg, #1e3c72, #2a5298);
      }

      body {
        font-family: "Inter", "Segoe UI", sans-serif;
        background: linear-gradient(120deg, #f2f4f7, #e9edf5);
        color: #333;
        margin: 0;
        padding: 0;
        line-height: 1.6;
        overflow-x: hidden;
      }

      header {
        background: var(--header-gradient);
        color: #fff;
        text-align: center;
        padding: 3rem 1.5rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      header h1 {
        font-family: "Merriweather", Georgia, serif;
        margin: 0;
        font-size: 2.4rem;
        font-weight: 700;
        letter-spacing: -0.5px;
      }

      header p {
        font-family: "Inter", "Segoe UI", sans-serif;
        margin: 0.8rem auto 0;
        max-width: 700px;
        font-size: 1.1rem;
        color: rgba(255, 255, 255, 0.9);
      }

      main {
        max-width: 1100px;
        margin: 0 auto;
        padding: 3rem 1.5rem;
        animation: fadeIn 1s ease-in-out;
      }

      section {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
      }

      section h2,
      section p {
        width: 90%;
        max-width: 900px;
        text-align: left;
        margin-left: auto;
        margin-right: auto;
      }

      h2 {
        color: #222;
        font-weight: 600;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.4rem;
      }

      h2::after {
        content: "";
        display: block;
        width: 50px;
        height: 3px;
        background-color: var(--accent-color);
        border-radius: 2px;
        margin-top: 6px;
      }

      p {
        max-width: 850px;
        font-size: 1rem;
        margin: 0 auto;
        line-height: 1.7;
        color: #555;
      }

      .chart {
        margin: 1.5rem auto;
        width: 90%;
        background: #fdfdfd;
        border-radius: 12px;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
        padding: 1rem;
        transform: translateY(10px);
        opacity: 0;
        animation: fadeUp 0.8s ease forwards;
      }

      footer {
        width: 100%;
        text-align: center;
        font-size: 0.95rem;
        padding: 1.5rem;
        color: #666;
        border-top: 1px solid #e2e2e2;
        background-color: #fafafa;
      }

      footer p {
        max-width: none; /* remove inherited 850px limit */
        margin: 0 auto; /* center horizontally */
        text-align: center; /* align text in the middle */
        line-height: 1.6;
      }

      /* Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      @-webkit-keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }

      /* Slider styling */
      input[type="range"] {
        accent-color: var(--accent-color);
        cursor: pointer;
        margin-left: 10px;
      }

      select {
        border: 1.5px solid #ccc;
        border-radius: 6px;
        padding: 6px 12px;
        font-size: 1rem;
        margin-left: 10px;
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        background: #fff;
      }

      select:hover {
        border-color: var(--accent-color);
        box-shadow: 0 0 0 3px rgba(227, 74, 51, 0.2);
      }
    </style>
  </head>

  <body>
    <header>
      <h1>Global Inflation: A Visual Story (1980–2024)</h1>
      <p>
        Exploring how inflation rates have shifted across the world and within
        individual countries.
      </p>
    </header>

    <main>
      <!-- SECTION 1: Choropleth Map -->
      <section>
        <h2>Global Overview of Inflation</h2>
        <p>
          The map below shows the global inflation rate across all countries
          from 1980 to 2024. 
        </p>

        <div id="map" class="chart"></div>
      </section>

      <!-- SECTION 2: Top 10 Inflation Countries -->
      <section>
        <h2>Top 10 Countries with the Highest Inflation</h2>
        <p>
          This bar chart ranks the top 10 countries with the highest inflation
          rate for the selected year. 

        <div id="top10chart" class="chart"></div>
      </section>

      <!-- SECTION 3: Line Chart -->
      <section>
        <h2>Country-Specific Inflation Trends</h2>
        <p>
          Select a country from the dropdown menu below to see how its inflation
          trend year by year.
        </p>

        <div id="linechart" class="chart"></div>
      </section>

      <!-- SECTION 4: Heatmap -->
      <section>
        <h2>Inflation Heatmap Across Countries and Years</h2>
        <p>
          This heatmap shows inflation rates across different countries from
          1980 to 2024. 
        </p>
        <div id="heatmap" class="chart"></div>
      </section>

      <section>
        <h2>Insights and Observations</h2>
        <p>
          Global inflation trends reveal regional disparities—Latin America and Africa face higher volatility, while developed economies show stability post-2000. Major global events like the 1980s oil crisis and the 2020 pandemic caused sharp surges, highlighting how inflation reflects both regional policies and worldwide economic shifts.
        </p>
      </section>
    </main>

    <footer>
      <p>
        <strong>Global Inflation Dashboard</strong> · Created with
        <a href="https://vega.github.io/vega-lite/" target="_blank">Vega-Lite</a
        ><br />
        2025 Tommy Tjoa · Updated 16 Oct 2025 · Data:
        <a
          href="https://www.kaggle.com/datasets/sazidthe1/global-inflation-data"
          target="_blank"
          >Global Inflation (1980–2024)</a
        ><br />
      </p>
    </footer>

    <!-- Vega-Lite Visualizations -->
    <script type="text/javascript">
      const mapSpec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
        "width": 800,
        "height": 400,
        "data": {
          "url":
            "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/3_choropleth_map/js/ne_110m_admin_0_countries.topojson",
          "format": {
            "type": "topojson",
            "feature": "ne_110m_admin_0_countries"
          }
        },
        "projection": { "type": "equalEarth" },
        "params": [
          {
            "name": "YearSelect",
            "value": 2024,
            "bind": {
              "input": "range",
              "min": 1980,
              "max": 2024,
              "step": 1,
              "name": "Year: "
            }
          }
        ],
        "layer": [
          {
            "transform": [
              {
                "calculate":
                  "'Data is not available in ' + datum.properties.NAME",
                "as": "note"
              }
            ],
            "mark": {
              "type": "geoshape",
              "fill": "lightgray",
              "stroke": "white"
            },
            "encoding": { "tooltip": { "field": "note" } }
          },
          {
            "data": {
              "url":
                "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/7_others/oceans.topojson",
              "format": { "type": "topojson", "feature": "oceans" }
            },
            "mark": { "type": "geoshape", "fill": "lightskyblue" }
          },
          {
            "data": {
              "url":
                "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/2_symbol_map/js/WorldMapWithGraticules.topojson",
              "format": {
                "type": "topojson",
                "feature": "ne_110m_graticules_30"
              }
            },
            "mark": {
              "type": "geoshape",
              "fill": null,
              "stroke": "#d0d0d0",
              "strokeWidth": 0.6
            }
          },
          {
            "data": {
              "url":
                "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/3_choropleth_map/js/ne_110m_admin_0_countries.topojson",
              "format": {
                "type": "topojson",
                "feature": "ne_110m_admin_0_countries"
              }
            },
            "transform": [
              { "calculate": "upper(datum.properties.ISO_A3)", "as": "iso3" },
              {
                "filter":
                  "datum.iso3 != '' && datum.iso3 != '---' && datum.iso3 != '-99'"
              },
              {
                "calculate": "datum.iso3 + '_' + YearSelect",
                "as": "ISO3_year"
              },
              {
                "lookup": "ISO3_year",
                "from": {
                  "data": {
                    "url":
                      "https://raw.githubusercontent.com/ttjo0003/FIT3179_A2/refs/heads/main/global_inflation_long_new_keyed.csv"
                  },
                  "key": "ISO3_year",
                  "fields": ["inflation", "country_name"]
                },
                "as": ["inflation_raw", "country_name_raw"],
                "default": {}
              },
              {
                "calculate": "toNumber(datum.inflation_raw)",
                "as": "inflation"
              },
              { "calculate": "datum.country_name_raw", "as": "country_name" },
              { "calculate": "YearSelect", "as": "year" }
            ],
            "mark": {
              "type": "geoshape",
              "stroke": "#888",
              "strokeWidth": 0.4
            },
            "encoding": {
              "color": {
                "condition": {
                  "test": "isValid(datum.inflation)",
                  "field": "inflation",
                  "type": "quantitative",
                  "title": "Inflation Rate (%)",
                  "scale": {
                    "scheme": "yelloworangered",
                    "domain": [0, 10],
                    "clamp": true
                  }
                },
                "value": "#d8d8d8"
              },
              "tooltip": [
                { "field": "properties.NAME", "title": "Country" },
                { "field": "inflation", "title": "Inflation (%)" },
                { "field": "year", "title": "Year" }
              ]
            }
          }
        ]
      };

      const lineSpec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
        "width": 700,
        "height": 400,
        "background": "#ffffff",
        "data": {
          "url":
            "https://raw.githubusercontent.com/ttjo0003/FIT3179_w9_hw/refs/heads/main/global_inflation_long_new.csv"
        },
        "params": [
          {
            "name": "CountrySelect",
            "value": "Malaysia",
            "bind": {
              "input": "select",
              "options": [
                "Malaysia",
                "Singapore",
                "Indonesia",
                "Thailand",
                "United States",
                "China",
                "Japan",
                "India",
                "United Kingdom",
                "Germany"
              ],
              "name": "Select Country: "
            }
          }
        ],
        "transform": [{ "filter": "datum.country_name == CountrySelect" }],
        "mark": {
          "type": "line",
          "point": true,
          "strokeWidth": 3,
          "color": "#e34a33"
        },
        "encoding": {
          "x": {
            "field": "year",
            "type": "temporal",
            "title": "Year",
            "axis": {
              "format": "%Y",
              "labelAngle": 0,
              "grid": true,
              "gridColor": "#f5f5f5"
            }
          },
          "y": {
            "field": "inflation",
            "type": "quantitative",
            "title": "Inflation Rate (%)",
            "axis": { "grid": true, "gridColor": "#f5f5f5" }
          },
          "tooltip": [
            { "field": "year", "title": "Year" },
            { "field": "inflation", "title": "Inflation (%)" }
          ]
        }
      };

      const top10Spec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
        "width": 700,
        "height": 400,
        "data": {
          "url":
            "https://raw.githubusercontent.com/ttjo0003/FIT3179_A2/refs/heads/main/global_inflation_long_new_keyed.csv"
        },
        "params": [
          {
            "name": "YearSelect",
            "value": 2024,
            "bind": {
              "input": "range",
              "min": 1980,
              "max": 2024,
              "step": 1,
              "name": "Year: "
            }
          }
        ],
        "transform": [
          { "filter": "datum.year == YearSelect" },
          { "filter": "isValid(datum.inflation)" },
          {
            "window": [{ "op": "rank", "as": "rank" }],
            "sort": [{ "field": "inflation", "order": "descending" }]
          },
          { "filter": "datum.rank <= 10" }
        ],
        "mark": { "type": "bar", "cornerRadiusEnd": 4, "tooltip": true },
        "encoding": {
          "y": {
            "field": "country_name",
            "type": "nominal",
            "sort": "-x",
            "title": "Country"
          },
          "x": {
            "field": "inflation",
            "type": "quantitative",
            "title": "Inflation Rate (%)"
          },
          "color": {
            "value": "#e8643c"
          },
          "tooltip": [
            { "field": "country_name", "title": "Country" },
            { "field": "inflation", "title": "Inflation (%)" },
            { "field": "year", "title": "Year" }
          ]
        },
        "config": {
          "view": { "stroke": "transparent" },
          "axis": { "grid": true, "gridColor": "#f0f0f0" },
          "background": "#ffffff"
        }
      };

      const heatmapSpec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "description":
          "Heatmap of inflation by country for a selected region (1980–2024).",
        "data": {
          "url":
            "https://raw.githubusercontent.com/ttjo0003/FIT3179_A2/refs/heads/main/global_inflation_long_new_keyed.csv"
        },
        "params": [
          {
            "name": "selectedRegion",
            "value": "Europe",
            "bind": {
              "input": "select",
              "options": ["Africa", "Americas", "Asia", "Europe", "Oceania"],
              "name": "Select Region: "
            }
          }
        ],
        "transform": [
          {
            "calculate":
              "if (indexof(['Germany','France','United Kingdom','Italy','Spain','Netherlands','Sweden'], datum.country_name) >= 0, 'Europe', if (indexof(['Malaysia','Singapore','Indonesia','Thailand','Philippines','Vietnam','Cambodia','Myanmar','Brunei','Laos'], datum.country_name) >= 0, 'Asia', if (indexof(['United States','Canada','Mexico','Brazil','Argentina','Chile','Colombia'], datum.country_name) >= 0, 'Americas', if (indexof(['South Africa','Nigeria','Kenya','Egypt'], datum.country_name) >= 0, 'Africa', if (indexof(['Australia','New Zealand'], datum.country_name) >= 0, 'Oceania', 'Other')))))",
            "as": "region"
          },
          {
            "filter": "datum.region == selectedRegion"
          }
        ],
        "mark": { "type": "rect", "stroke": "white", "strokeWidth": 0.5 },
        "encoding": {
          "x": {
            "field": "year",
            "type": "ordinal",
            "title": "Year",
            "axis": {
              "values": [
                1980, 1985, 1990, 1995, 2000, 2005, 2010, 2015, 2020, 2024
              ],
              "labelAngle": 0,
              "labelFontSize": 10
            }
          },
          "y": {
            "field": "country_name",
            "type": "nominal",
            "title": "Country",
            "sort": "ascending",  
            "axis": { "labelFontSize": 10 }
          },
          "color": {
            "field": "inflation",
            "type": "quantitative",
            "title": "Inflation Rate (%)",
            "scale": {
              "scheme": "reds",
              "domain": [0, 20]
            },
            "legend": { "titleFontSize": 12, "labelFontSize": 10 }
          },
          "tooltip": [
            { "field": "country_name", "title": "Country" },
            { "field": "year", "title": "Year" },
            { "field": "inflation", "title": "Inflation (%)", "format": ".2f" }
          ]
        },
        "width": 700,
        "height": { "step": 20 },
        "config": {
          "axis": { "labelFont": "Inter", "titleFont": "Inter" },
          "legend": { "labelFont": "Inter", "titleFont": "Inter" },
          "font": "Inter"
        }
      };

      // Add this line to render the heatmap:
      vegaEmbed("#heatmap", heatmapSpec, { actions: false });

      vegaEmbed("#top10chart", top10Spec, { actions: false });
      vegaEmbed("#map", mapSpec, { actions: false });
      vegaEmbed("#linechart", lineSpec, { actions: false });
    </script>
  </body>
</html>
